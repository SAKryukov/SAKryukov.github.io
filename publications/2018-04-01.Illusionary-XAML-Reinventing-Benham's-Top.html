<!DOCTYPE html>
<!-- saved from url=(0085)https://www.codeproject.com/Articles/1237396/Illusionary-XAML-Reinventing-Benhams-Top -->
<html lang="en" data-lt-installed="true"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">

	
	<link rel="preconnect" href="https://www.google-analytics.com/">

	<link rel="preconnect" href="https://www.codeproject.com/">


	<link rel="preload" href="./Resources/logo250x135.gif" as="image">


	<link rel="preload" href="https://www.codeproject.com/App_Themes/CodeProject/Img/logo135-bg.gif" as="image">
	<link rel="preload" href="./Resources/jquery-3.4.1.min.js.download" as="script" type="text/javascript">


	<title>Illusionary XAML: Reinventing Benham's Top- CodeProject</title> 
    
        <style>
            @import url(./Resources/Article.min.css);
            @import url(./code/epigraph.css);
        </style>

    <script type="text/javascript" async="" src="./Resources/analytics.js.download"></script><script type="text/javascript" src="./Resources/jquery-3.4.1.min.js.download" defer=""></script>
<script type="text/javascript" src="./Resources/article.min.js.download" defer=""></script>

	
<meta http-equiv="content-language" content="en-US">

<meta name="Description" content="The mystery of Benham’s top invented in 1895, as well as Fechner color effect, remains not fully uncovered so far. WPF and XAML help to accelerate the research greatly.">
<meta name="Keywords" content="">
<meta name="Author" content="Sergey Alexandrovich Kryukov">
<meta name="Rating" content="General">
<meta name="Revisit-After" content="1 days">
<meta name="application-name" content="CodeProject">
<meta name="google-translate-customization" content="d908bb7ce7aff658-4c2f3a504525c916-g629383f736781a8a-13">



<link rel="dns-prefetch" href="https://ajax.googleapis.com/"> 
<link rel="canonical" href="https://www.codeproject.com/Articles/1237396/Illusionary-XAML-Reinventing-Benhams-Top">
<meta name="twitter:card" content="summary">
<meta name="twitter:site" content="@CodeProject">
<meta name="og:site_name" content="CodeProject">
<meta name="twitter:creator" content="@CodeProject">
<meta property="og:type" content="article">
<meta property="article:published_time" content="4/1/2018 1:28:00 AM">
<meta property="article:modified_time" content="4/1/2018 9:31:00 PM">
<meta name="twitter:label1" content="Written by">
<meta name="twitter:data1" content="Sergey Alexandrovich Kryukov">
<meta property="og:url" content="https://www.codeproject.com/Articles/1237396/Illusionary-XAML-Reinventing-Benhams-Top">
<meta property="og:title" content="Illusionary XAML: Reinventing Benham&#39;s Top">
<meta property="og:description" content="The mystery of Benham’s top invented in 1895, as well as Fechner color effect, remains not fully uncovered so far. WPF and XAML help to accelerate the research greatly.">


<meta name="viewport" content="width=device-width, initial-scale=1.0">

<link rel="apple-touch-icon" sizes="144x144" href="https://www.codeproject.com/favicon/apple-touch-icon.png"> 
<link rel="icon" type="image/png" sizes="32x32" href="https://www.codeproject.com/favicon/favicon-32x32.png"> 
<link rel="icon" type="image/png" sizes="16x16" href="https://www.codeproject.com/favicon/favicon-16x16.png"> 
<link rel="manifest" href="https://www.codeproject.com/favicon/manifest.json"> 
<link rel="mask-icon" href="https://www.codeproject.com/favicon/safari-pinned-tab.svg" color="#ff9900">
	<script type="application/ld+json">{
  "@context": "http://schema.org",
  "@type": "TechArticle",
  "mainEntityOfPage": {
    "@type": "WebPage",
    "@id": "https://www.codeproject.com/Articles/1237396/Illusionary-XAML-Reinventing-Benhams-Top"
   },
  "name": "Illusionary XAML: Reinventing Benham's Top",
  "headline": "Illusionary XAML: Reinventing Benham's Top",
  "url": "https://www.codeproject.com/Articles/1237396/Illusionary-XAML-Reinventing-Benhams-Top",
  "discussionUrl": "#_comments",
  "isFamilyFriendly": "true",
  "image": "https://www.codeproject.com/App_Themes/CodeProject/Img/Article100.png",
  "commentCount": "0",
  "editor" : {
    "@type" : "Person",
    "name" : "Editor",
    "url" : "https://www.codeproject.com/script/Membership/View.aspx?mid=2291164"
  },
  "publisher" : {
    "@type" : "Organization",
    "name" : "CodeProject"
  },
  "description": "The mystery of Benham’s top invented in 1895, as well as Fechner color effect, remains not fully uncovered so far. WPF and XAML help to accelerate the research greatly.",
  "author" : [{
      "@type" : "Person",
      "name" : "Sergey Alexandrovich Kryukov",
      "url" : "https://www.codeproject.com/script/Membership/View.aspx?mid=2291164"
    }],
  "datePublished": "2018-04-01",
  "dateCreated": "2018-04-01",
  "dateModified": "2018-04-01"
}</script>

<script type="text/javascript">
function defrm () { /* thanks twitter */
    document.write = '';
    window.top.location = window.self.location;
    setTimeout(function() { document.body.innerHTML = ''; }, 0);
    window.self.onload = function(evt) { document.body.innerHTML = ''; };
}

if (window.top !== window.self) {
    try {
        if (window.top.location.host) { /* will throw for all except chrome */ }
        else { defrm(); /* chrome */ }
    } catch (ex) { defrm(); /* everyone else */ }
}

// Specific case where a site is screwing with us.
if (typeof(DemoUrl) !== 'undefined') {
    document.write(unescape('%3Cme') + 'ta http' + '-equiv="re' + 'fresh con' +
                           'tent="1;url=' + DemoUrl + unescape('"%3CE'));
}
</script>
	





    <script async="" type="text/javascript" src="./Resources/js"></script>
    <script type="text/javascript">
        window.dataLayer = window.dataLayer || [];
        function gtag() { dataLayer.push(arguments); }
        gtag('js', new Date());

        gtag('config', 'UA-1735123-1' , {'user_id': '42a7d533-9829-4f88-8fc6-84dc936250c9'});
    </script>

<style type="text/css"></style></head>	

<body class="chrome chrome120" data-new-gr-c-s-check-loaded="14.1215.0" data-gr-ext-installed="">



<a class="access-link" href="#Main"><img alt="Click here to Skip to main content" src="./Resources/t.gif"></a>




<div class="page-background">

	
	

	

	
    <div id="ctl00_STM" class="site-top-menu fixed narrow">
        <div class="main-content">
            

<div class="container memberbar clearfix flex-container flex-extend">

	<div id="ctl00_MemberBar_GenInfo" class="flex-item align-left">65,938 articles</div>
	
	<div id="ctl00_MemberBar_ChangeNotice" class="flex-item align-left">CodeProject
	is changing. <a href="https://www.codeproject.com/info/Changes.aspx">Read more</a>.</div>

	<div class="flex-item">
		
	</div>

	<div class="flex-item align-right">

		

		

		
	</div>
</div>
        </div>
    </div>

	
    <div id="ctl00_SH" class="site-header fixed narrow">
        <div class="main-content">
            <div class="logo"><a href="https://www.codeproject.com/"><img id="ctl00_Logo" tabindex="1" title="CodeProject" src="./Resources/logo250x135.gif" alt="Home" style="height:135px;width:250px;border-width:0px;"></a></div>
            <div class="promo"></div>
        </div>
    </div>

	
			
	

	<div id="A" class="container-content-wrap fixed narrow"> 

	<div class="container-content">

        
		<div class="clearfix">
			<div class="container-breadcrumb float-left ">
				<div><a rel="nofollow" href="https://www.codeproject.com/script/Content/SiteMap.aspx">Articles</a></div>
			</div>

            <div class="float-left">
				
			</div>

			<div class="edit-links float-right">
				



 
&nbsp;










			</div>

			<div class="article-nav float-right">
				


<div style="display:inline-block;position:relative;top:-6px;margin-right:20px">
    
</div>



 

<a id="ctl00_ActionLinks_PrintMd" data-tooltip="Print" data-enabletooltip="true" data-width="auto" href="https://www.codeproject.com/Articles/1237396/Illusionary-XAML-Reinventing-Benhams-Top?display=Print" class="tooltip" title="">
   <img src="./Resources/print48.png" width="24" height="24" style="border:0">
<div class="speech-bubble-container-up" style="width:auto">  <div class="speech-bubble-up" style="text-align:center"> Print</div>  <div class="speech-bubble-pointer-up">    <div class="speech-bubble-pointer-up-inner"></div>  </div></div></a>



<span id="ctl00_ActionLinks_R">
    
    
</span>
			</div>
		</div>

        
		<div class="extended article-container-parts">

			
		    
            

			
			<div id="AT" class="article-container  fixed narrow" style="max-width:inherit;"> 

				<div class="article">

					<form name="aspnetForm" method="post" action="https://www.codeproject.com/Articles/1237396/View.aspx" id="aspnetForm" style="margin:0;padding:0">
<div>
<input type="hidden" name="__VIEWSTATE" id="__VIEWSTATE" value="GOTHC9qjklc2/Y9eiz9vFBub1rmbPnrlZhHW2ZH2Rxzg7PyZIPfkGUZoskY/iQDUEpZfbNQRCN6T8CUAWZDZsz7W3+lJNyXSPTvcNZqt+T57oUgfLLjSb+XUrgdfBY2kQ32Lmz5T74IUI1QXhcrSE9lpJ9GaV/psjRTW0BuX7uEEdOJMmZMQKo7ktosce3Ot5IB1VPzNHtlcZGGPKt7bcJmdI1Jy8C9C0554DKjRxAHcGgQ8ZUSywsrTwIugiKqj9se7UvLHsqexmFbwa1ZGAxOz+nJ4q7HuGoSBXMi243FvJ8UJhGsmccWO3BAHGZZD6tW6Qikn51LWf1uRrnhO+SIoQ+tNJ0FCQ2wWYO0A6wasif+mJX2DWvL8g+d0662eXa/I3fZxyU5PpLdf7hIl6fKeptaIYrpaCdcr6oBSfJXWY8ug5zOsZMIw6Zeym5SMrq5TG4RyTPBiJCFifflhb7M1ypabwy6ypExj9kWBIHCpAn/rh/dLYXypS6bIqs6bsCWAVJ9EGdz5R1WcwVgEot/mnqnf9AVbb/a4FXoz3miN4mmKTK+Mol9Bm7+wwWA6P/0GN8v6D63QuNJeqJmseMLapx4EpDokAMhLJFNbxO4cCBzrvVhsehyp/O7G24W2uKc5m8gRvp9C5Q4aJMrD9c7ukPv9cYy6HJaJDb5pJ+8DVCWiZT0xzr5/0o6JvOePdFM4kKESVnIBCcSdtgnZtwZQ8BtW3kiaQCiOOM/CYWKnEBBOVgFDz5III3CrvKR0JkxDe6SjXb++VqRzO4Ojxu/EK0ZqE90S3ZXKsFp58Rm1L5mft5KybdCXxhq9a7ltB3rBcSIZbVZUYlO8zdRcy/kaKjD/BXCfVMYnkisRF1yQObjRF/L1z0pRO6A3yaPmXIVpBYVXyVl7xJOUN72hUfnCwFAhTdEjjpI80dj+XLTZN2Wc7j3LN/Cot7cAzGMzL5eMcf5VVMfScqbPKlNd1NxvjHgA00pSRn/Gta7O3x+c0aEgMAaE7yzQp+v2WKe+WkhMbBRSzUXcZs9D/rpz4I6QCA/tR0nWAFESLNalbWpZKosgjtpW7FQipV2vYzlD/7to0kUcYfI9uU5aV+X/RsbSAb36xHhECSyLPmOOBOd0H8wxMUMjAP45LTxNaJPqp0gUSZyEUg1o4fE/FB3jNC6y5+1wPaFURJyKyZyq9IZDEUEajDCGpIwgopsVQ3iS40ymgFjspPvOlrnMv2KLroY/vAOTrq8pk45Pk7FEXS1/pZRXqhaeYWXBU4aiKt7ukPFgDZpduz8aGCzwPkslV2Awyh8KBD2jNeSFkeKb2qJjzXtcQy1yHHqrDjCrmcYvO0FjZXbc4hh+325qncolAT1XekY/R/e4HN3jtM6JcwzpBd5lgIY8/kIKYFb0XnsyI98iYke7vR1ZxadXwb6APx5c7t8652z+9dmlB6A36Ej27t23a3LhTZxs4iJxWL2IU2ubseIRsNb7TjMzEg12splpKwh+rYVzmvFUETdFmkTt15NUDQsiTywvmbuLiBxNM/Fxy+2Q8QdSlvbui60zzhlhz+rZ0aAdM9erTA1Pir5Es/JenYXHYB+EZV3YirDALKZi/rg6SUTSgyBTuVb4jKWojD2/Cr7tgHYzhBwZKm3nYziTDNyTO/d1rxP8lSqUAHshGf5xr5LLRdlm/iGGGmkTFsuXkWvitEtEb2VUWdk7/4lytF6nBuehYiqLajShmhkCfwsf+LehYCXHIX4BndeocAT0lAjKAUaH9VqeRrA+CLu+AkvIctiP9dMQi+97VjVEDg==">
</div>

<div>

	<input type="hidden" name="__VIEWSTATEGENERATOR" id="__VIEWSTATEGENERATOR" value="10C1FD69">
</div>

					
					 
					<div class="header">
					    <a name="Main"></a>
					    <a name="_articleTop" id="_articleTop"></a>

					    
						<div>
							<span id="ctl00_TagListHorz_TagWrp">

	
	

	
	<span id="ctl00_TagListHorz_VisibleTags" class="subdue">(untagged)</span> 

	
	
</span>


						</div>
					    <div class="title">
					        <h1 id="ctl00_ArticleTitle">Illusionary XAML: Reinventing Benham's Top</h1>
					    </div>

                        <div>
					        
					        <div class="entry flex-container">

								

                                <div class="flex-item" style="flex:1 1 auto">
                                    <div class="flex-container" style="justify-content:space-between;flex-wrap:wrap-reverse">
                                       <span id="ctl00_Authors" class="author flex-item"><a href="https://www.codeproject.com/script/Membership/View.aspx?mid=2291164" rel="author">Sergey Alexandrovich Kryukov</a></span> 

                                        <div class="flex-item" style="margin-top:-4px;">
                                            <div id="ctl00_RateArticle_RatingTable" class="small-text" data-objectref="2_1237396">

	<meta itemprop="upvoteCount" content="0">


	<div id="ctl00_RateArticle_RatingRow" class="flex-container rating-container large-stars">

					
		

		
		<div class="nowrap tooltip">

			
			<div id="ctl00_RateArticle_ResultNoHist" class="rating-result"><div class="flex-container rating-stars large-stars"><div style="width:24px;position:relative" class="clipped"><img src="./Resources/star-empty-lg.png" style="width:24px;height:24px;position:absolute;top:0px;right:0"></div><div><img src="./Resources/star-empty-lg.png" style="width:24px;height:24px"></div><div><img src="./Resources/star-empty-lg.png" style="width:24px;height:24px"></div><div><img src="./Resources/star-empty-lg.png" style="width:24px;height:24px"></div><div><img src="./Resources/star-empty-lg.png" style="width:24px;height:24px"></div></div></div>
			

			
			

			
            

			
                

		</div>
		
	
		
		<div id="ctl00_RateArticle_VoteCountNoHist" class="rating-votes nowrap">0.00/5  (No votes)</div>	

		

		
		<div class="rating-undo" title="Undo vote" style="margin-left:5px;display:none"></div>

		
		
	</div>

	
	

</div>

                                        </div>
                                    </div>

                                    <div class="flex-container" style="color:#666;font-size:smaller">
                                        <span id="ctl00_LastUpdated" class="date flex-item-tight" title="Date last updated">1 Apr 2018</span><span id="ctl00_HorizontalStats" class="stats flex-item-tight"><span class="stats"><span title="Views"><img src="./Resources/views32.png" style="width:16px"> 1</span> &nbsp; </span></span>
                                    </div>
                                </div>
					        </div>

                            

                        </div>

                        <div id="ctl00_DescriptionSpot" class="summary">The mystery of Benham’s top invented in 1895, as well as Fechner color effect, remains not fully uncovered so far. WPF and XAML help to accelerate the research greatly.</div><span id="ctl00_ThumbnailUrl" class="date" content="https://www.codeproject.com/script/Articles/Images/article100x80.png"></span>			

                    </div>
                    
					
					

					

					
					

					
					

						
					

					

						
						<div id="contentdiv" class="text">
						



<!-- Article Starts -->

<ul class="download">
	<li><a href="Illusionary-XAML-Reinventing-Benham's-Top.zip" id="src-all">Download source code — 64.2 KB</a></li></ul>

<p><strong>Warning</strong>: Running and observing the provided applications on a computer screen may potentially trigger seizures for people with photosensitive epilepsy. Viewer discretion is advised.</p>

<p><img id="img-title" src="./Resources-articles/2018-04-01.Illusionary-XAML-Reinventing-Benham's-Top.title.webp"></p>

<p class="epigraph">Epigraph:<br/>
<br/>
<em>If you see a "buffalo" sign on an elephant's cage, do not <a href="https://www.webcitation.org/query?url=http://www.geocities.com/uniart/mix/kp.htm&amp;date=2009-10-25+23:33:23">trust your eyes</a>.</em><br/>
<strong><a href="https://en.wikipedia.org/wiki/Kozma_Prutkov">Kozma Prutkov</a></strong>
</p>

<h2 id="heading.contents">Contents</h2>

<div class="toc">
<ul style="list-style-type: none">
	<li><a href="#heading.introduction">Introduction</a></li>	<li><a href="#heading.xaml-as-vector-graphics">XAML as Vector Graphics</a></li>	<li><a href="#heading.loading-xaml-vector-graphics-dynamically">Loading XAML Vector Graphics Dynamically</a></li>	<li><a href="#heading.saving-xaml-vector-graphics">Saving XAML Vector Graphics</a></li>	<li><a href="#heading.playing-with-the-illusion">Playing with the Illusion</a></li>	<li><a href="#heading.what-if-you-don27t-believe-the-demo3f">What if You don't Believe the Demo?</a></li>	<li><a href="#heading.pattern-editor">Pattern Editor</a></li>	<li><a href="#heading.conclusions">Conclusions</a></li></ul>
</div>

<h2 id="heading.introduction">Introduction</h2>

<p>Many years ago, I was greatly intrigued with one visual oddity produced by a toy I read about in one of the books popularizing psychology. That was a pretty well-known invention called <a href="https://en.wikipedia.org/wiki/Benham&#39;s_top">Benham’s top</a>, or Benham’s disk, named after its creator, an amateur scientist and toymaker.</p>

<p>The black-and-white pattern of this disk, when it is spun, produces illusionary effect of variety of pale but distinct colors, called <a href="https://en.wikipedia.org/wiki/Fechner_color">Fechner colors</a>. Unlike many other illusions of human visual perception, this effect is not entirely understood, not even at present days.</p>

<p>No wonder, I immediately reproduced this object using wooden sticks, pieces of cardboard, Whatman paper, India ink and a technical drawing toolset, trying different patterns. To my amazement, I worked immediately, but… only if my pattern was pretty close to the original Benham’s disk. Sometimes, not very noticeable difference totally killed otherwise well-pronounced effect. Probably, most of the time I simply went in wrong direction. Later on, I saw several publications of different authors who offered very different designs and claimed that they produce similar effects; moreover, some even called their patterns “Benham’s top”. Despite all such claims… none of those designs actually worked. Not at all. The mere fact of such publications and claims was another mystery.</p>

<p>So, what’s the big deal? Why some patterns work and other don’t? This is a question which is hard to answer.</p>

<p>Recently, I decided to spend some time to create a fairly convenient tool for experimenting. It is pretty obvious that the time required for creation and testing a pattern is one of the most limiting factors. To make experimenting productive, we need good number of trials and errors. It is also pretty obvious that, at the beginning of the experiments, it would be hard to predict the required features of the pattern editor.</p>

<p>These considerations lead to the idea that the application for experimenting should provide some combination of features. At the very beginning, it should better provide the facility for rendering and rotation of the patterns created by some available external editors. Getting some experience would make further plans clear. When some techniques used to create new patterns are developed, the specialized pattern editor would further accelerate the research, as patterns can be created on the fly and tested immediately, step by step.</p>

<p>This is how the application called “ColorTop” was created. In the present article, I’ll explain how it works and report some basic experimental results.</p>

<h2 id="heading.xaml-as-vector-graphics">XAML as Vector Graphics</h2>

<p>It seems to be pretty obvious that for our purposes our best bet would be exclusively vector graphics. With vector graphics, we can seamlessly scale our image properly and render it with no quality loss, with minimal pixelation, thanks to the <a href="https://en.wikipedia.org/wiki/Anti-aliasing">anti-aliasing techniques</a>.</p>

<p>Let’s start with something simple. First of all, I would like to illustrate the power of XAML used as vector graphics.<br>
This article comes with the <a href="#src-all">source code</a> showing two applications: main “ColorTop” and simple introductory application “XamlDemo”. Let’s first look at “XamlDemo”.</p>

<p>This simple application shows my vectorized rendition of the CodeProject mascot. The image is scalable, hence showing little to no pixelation when scaled:</p>

<p><img src="./Resources-articles/2018-04-01.Illusionary-XAML-Reinventing-Benham's-Top.Mascot.webp"></p>

<p>Additional element, the golden star, is placed in the background, and animated using standard WPF animation.</p>

<p>If you look at the provided source code (the project named “XamlDemo”), you will see next to nothing. Even the image seems to be missing. Actually, a single XAML element <code>Canvas</code>, the only element of this type, has it all in its content. It can be found in the only XAML file of this project, “MainWindows.xaml”. Actually, more consistent technique would require vector-graphic part to be placed in a separate file, defining a Resource Dictionary, or a set of such dictionaries, but I wanted to demonstrate a simplest solution.</p>

<p>Note that the <code>Canvas</code> element is placed in a <code>Viewbox</code> element, which defines the scaling behavior of the view. Correct settings for scaling preserving original <em>aspect ratio</em> are achieved be setting a single property: <code>Stretch="Uniform"</code>.</p>

<p>Now, where the <code>Canvas</code> content itself came from?</p>

<p>First of all, I need to apologize for less than perfect vectorization of the image. First problem was the limited pixel size and quality of the bitmap source taken from the CodeProject Web site. Ideally, vector image should be created from scratch. How I obtain the vectorized image? Oh, this is done thanks to my “secret weapon”, one of my favorite applications, cross-platform open-source <a href="https://gitlab.com/inkscape/inkscape">Inkscape</a>. This application would be my best recommendation to anyone who needs 2D vector graphics, and many of those who need any kind of graphics.</p>

<p>In the case of CodeProject logo, I’ve used simple and efficient Inkscape feature Path-&gt;TraceBitmap, to get basic <a href="https://en.wikipedia.org/wiki/B%C3%A9zier_curve">Bézier curves</a> out of the bitmap, and then tweaked the curves manually, using the usual vector-graphics controls. After that, I saved the image in both <a href="https://en.wikipedia.org/wiki/SVG">SVG</a> and XAML formats. From the vector-graphics standpoint, SVG format is more feature-reach than XAML and is compact enough, so it should better be preserved in all cases.</p>

<p>This is how the animation is done:</p>

<div class="pre-lang" id="premain135355"><div>c#</div><div class="pre-action-link"><span class="code-collapse" data-index="135355" id="preShrink135355">Shrink ▲</span> &nbsp; <span class="copy-code" data-index="135355" id="copycode135355" style="visibility: visible;"><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" viewBox="0 0 460 460" style="width: 16px;height:16px;" xml:space="preserve">
<g>
<path d="M425.934,0H171.662c-18.122,0-32.864,14.743-32.864,32.864v77.134h30V32.864c0-1.579,1.285-2.864,2.864-2.864h254.272
    c1.579,0,2.864,1.285,2.864,2.864v254.272c0,1.58-1.285,2.865-2.864,2.865h-74.729v30h74.729
    c18.121,0,32.864-14.743,32.864-32.865V32.864C458.797,14.743,444.055,0,425.934,0z"></path>
<path d="M288.339,139.998H34.068c-18.122,0-32.865,14.743-32.865,32.865v254.272C1.204,445.257,15.946,460,34.068,460h254.272
    c18.122,0,32.865-14.743,32.865-32.864V172.863C321.206,154.741,306.461,139.998,288.339,139.998z M288.341,430H34.068
    c-1.58,0-2.865-1.285-2.865-2.864V172.863c0-1.58,1.285-2.865,2.865-2.865h254.272c1.58,0,2.865,1.285,2.865,2.865v254.273h0.001
    C291.206,428.715,289.92,430,288.341,430z"></path>	
</g>
</svg></span></div></div><pre id="pre135355" lang="c#" data-codeblock-processed="true" style="margin-top: 0px;" class="notranslate"><span class="code-keyword">public</span> <span class="code-keyword">partial</span> <span class="code-keyword">class</span> MainWindow : Window {

    <span class="code-keyword">public</span> MainWindow() {
        InitializeComponent();
    } <span class="code-comment">//</span><span class="code-comment">MainWindow</span>

    <span class="code-keyword">void</span> Animate(Canvas svg, Path star) {
        DoubleAnimation da = <span class="code-keyword">new</span> DoubleAnimation();
        da.From = <span class="code-digit">0</span>;
        da.To = <span class="code-digit">360</span>;
        da.Duration = <span class="code-keyword">new</span> Duration(TimeSpan.FromSeconds(<span class="code-digit">5</span>));
        da.RepeatBehavior = RepeatBehavior.Forever;
        RotateTransform rt = <span class="code-keyword">new</span> RotateTransform();
        rt.CenterX = svg.Width / <span class="code-digit">2</span>;
        rt.CenterY = svg.Height / <span class="code-digit">2</span>;
        star.RenderTransform = rt;
        rt.BeginAnimation(RotateTransform.AngleProperty, da);
    } <span class="code-comment">//</span><span class="code-comment">Animate</span>

    <span class="code-keyword">protected</span> <span class="code-keyword">override</span> <span class="code-keyword">void</span> OnContentRendered(System.EventArgs e) {
        <span class="code-keyword">base</span>.OnContentRendered(e);
        svg.Background = Brushes.Transparent;
        Animate(<span class="code-keyword">this</span>.svg, <span class="code-keyword">this</span>.star);
    } <span class="code-comment">//</span><span class="code-comment">OnContentRendered</span>

} <span class="code-comment">//</span><span class="code-comment">class MainWindow</span></pre>

<p>Actually, this comprises entire application-specific part of code.</p>

<p>The key here is understanding of the access to the object <code>this.star</code>. It is originated from XAML as early as it was created with Inkscape. When we want to manipulate a vector-graphic object originated from SVG, we need to generate a value for corresponding <code>Name</code> property of a corresponding XAML object property. InkSkape generates XAML code with <code>Name</code> values copied from XML <code>id</code> attribute values of SVG. As the attribute <code>id</code> values are unique, generated <code>Name</code> values are also unique, which is one of the requirements.</p>

<p>Therefore, the recipe includes the following step: with Inkscape, the SVG object of interest should be edited with “Object Properties”; its <code>id</code> value should be given the value which is unique in the scope of the document and is also a valid .NET variable/property identificator and is easily recognizable, convenient for the code developer.</p>

<h2 id="heading.loading-xaml-vector-graphics-dynamically">Loading XAML Vector Graphics Dynamically</h2>

<p>Now, let’s get to next step. Instead of embedding vector graphics, the application “ColorTop” offers loading and saving of XAML files. The graphics can be edited in a specialized way, helping to experiment with features contributing to the <a href="https://en.wikipedia.org/wiki/Fechner_color">Fechner color effect</a>.</p>

<p>Loading itself is pretty much trivial:</p>

<div class="pre-lang" id="premain116852"><div>c#</div><div class="pre-action-link"><span class="code-collapse" data-index="116852" id="preShrink116852">Shrink ▲</span> &nbsp; <span class="copy-code" data-index="116852" id="copycode116852" style="visibility: visible;"><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" viewBox="0 0 460 460" style="width: 16px;height:16px;" xml:space="preserve">
<g>
<path d="M425.934,0H171.662c-18.122,0-32.864,14.743-32.864,32.864v77.134h30V32.864c0-1.579,1.285-2.864,2.864-2.864h254.272
    c1.579,0,2.864,1.285,2.864,2.864v254.272c0,1.58-1.285,2.865-2.864,2.865h-74.729v30h74.729
    c18.121,0,32.864-14.743,32.864-32.865V32.864C458.797,14.743,444.055,0,425.934,0z"></path>
<path d="M288.339,139.998H34.068c-18.122,0-32.865,14.743-32.865,32.865v254.272C1.204,445.257,15.946,460,34.068,460h254.272
    c18.122,0,32.865-14.743,32.865-32.864V172.863C321.206,154.741,306.461,139.998,288.339,139.998z M288.341,430H34.068
    c-1.58,0-2.865-1.285-2.865-2.864V172.863c0-1.58,1.285-2.865,2.865-2.865h254.272c1.58,0,2.865,1.285,2.865,2.865v254.273h0.001
    C291.206,428.715,289.92,430,288.341,430z"></path>	
</g>
</svg></span></div></div><pre id="pre116852" lang="c#" data-codeblock-processed="true" style="margin-top: 0px;" class="notranslate"><span class="code-keyword">using</span> XamlReader = System.Windows.Markup.XamlReader;
<span class="code-keyword">using</span> Canvas = System.Windows.Controls.Canvas;
<span class="code-keyword">using</span> Viewbox = System.Windows.Controls.Viewbox;

<span class="code-comment">//</span><span class="code-comment"> ...</span>

<span class="code-keyword">public</span> MainWindow() {
    <span class="code-comment">//</span><span class="code-comment"> ...</span>
    Action reload = () =<span class="code-keyword">&gt;</span> {
        <span class="code-keyword">if</span> (openDialog.ShowDialog() != <span class="code-keyword">true</span>) <span class="code-keyword">return</span>;
        <span class="code-keyword">using</span> (XmlReader reader = XmlReader.Create(openDialog.FileName)) {
            DependencyObject top = XamlReader.Load(reader) <span class="code-keyword">as</span> DependencyObject;
            Canvas canvas = findCanvas(top);
            <span class="code-keyword">if</span> (canvas == <span class="code-keyword">null</span>) <span class="code-keyword">throw</span> <span class="code-keyword">new</span> Main.NoCanvasException();
            Viewbox vb = top <span class="code-keyword">as</span> Viewbox;
            <span class="code-keyword">if</span> (vb == <span class="code-keyword">null</span>) {
                vb = <span class="code-keyword">new</span> Viewbox();
                vb.Child = canvas;
            } <span class="code-comment">//</span><span class="code-comment">if</span>
            <span class="code-keyword">this</span>.borderAnimationBackground.Child = vb;
            animationState.Animate(animatedElement, animation, canvas);
            <span class="code-keyword">string</span> title = getTitle(vb);
            <span class="code-keyword">if</span> (title == <span class="code-keyword">null</span>)
                title = getTitle(canvas);
            <span class="code-keyword">if</span> (title == <span class="code-keyword">null</span>)
                title = System.IO.Path.GetFileName(openDialog.FileName);
            animationState.setTitle(<span class="code-keyword">this</span>, title);
        } <span class="code-comment">//</span><span class="code-comment">using</span>
    }; <span class="code-comment">//</span><span class="code-comment">reload</span>
    <span class="code-comment">//</span><span class="code-comment"> ...</span>
}</pre>

<p>The animation is similar to the code <a href="#src-simple-animation">shown above</a>. The only notable part of this loading code is related to finding certain XAML elements, first of all, <code>Canvas</code>:</p>

<div class="pre-lang" id="premain581497"><div>c#</div><div class="pre-action-link"><span class="copy-code" data-index="581497" id="copycode581497" style="visibility: visible;"><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" viewBox="0 0 460 460" style="width: 16px;height:16px;" xml:space="preserve">
<g>
<path d="M425.934,0H171.662c-18.122,0-32.864,14.743-32.864,32.864v77.134h30V32.864c0-1.579,1.285-2.864,2.864-2.864h254.272
    c1.579,0,2.864,1.285,2.864,2.864v254.272c0,1.58-1.285,2.865-2.864,2.865h-74.729v30h74.729
    c18.121,0,32.864-14.743,32.864-32.865V32.864C458.797,14.743,444.055,0,425.934,0z"></path>
<path d="M288.339,139.998H34.068c-18.122,0-32.865,14.743-32.865,32.865v254.272C1.204,445.257,15.946,460,34.068,460h254.272
    c18.122,0,32.865-14.743,32.865-32.864V172.863C321.206,154.741,306.461,139.998,288.339,139.998z M288.341,430H34.068
    c-1.58,0-2.865-1.285-2.865-2.864V172.863c0-1.58,1.285-2.865,2.865-2.865h254.272c1.58,0,2.865,1.285,2.865,2.865v254.273h0.001
    C291.206,428.715,289.92,430,288.341,430z"></path>	
</g>
</svg></span></div></div><pre id="pre581497" lang="c#" data-codeblock-processed="true" style="margin-top: 0px;" class="notranslate"><span class="code-keyword">using</span> Canvas = System.Windows.Controls.Canvas;
<span class="code-keyword">using</span> LogicalTreeHelper = System.Windows.LogicalTreeHelper;

<span class="code-comment">//</span><span class="code-comment"> ...</span>

<span class="code-keyword">static</span> Canvas findCanvas(System.Windows.DependencyObject parent) {
    <span class="code-keyword">if</span> (parent == <span class="code-keyword">null</span>) <span class="code-keyword">return</span> <span class="code-keyword">null</span>;
    Canvas result = parent <span class="code-keyword">as</span> Canvas;
    <span class="code-keyword">if</span> (result != <span class="code-keyword">null</span>) <span class="code-keyword">return</span> result;
    DependencyObject current = parent;
    <span class="code-keyword">var</span> children = LogicalTreeHelper.GetChildren(parent);
    <span class="code-keyword">foreach</span> (<span class="code-keyword">var</span> child <span class="code-keyword">in</span> children) {
        result = child <span class="code-keyword">as</span> Canvas;
        <span class="code-keyword">if</span> (result != <span class="code-keyword">null</span>)
            <span class="code-keyword">return</span> result;
        <span class="code-keyword">else</span>
            <span class="code-keyword">return</span> findCanvas(child <span class="code-keyword">as</span> System.Windows.DependencyObject);
    } <span class="code-comment">//</span><span class="code-comment">loop</span>
    <span class="code-keyword">return</span> result;
} <span class="code-comment">//</span><span class="code-comment">findCanvas</span></pre>

<p>This is done to give some freedom to the author of the XAML file. XAML code created by Inkscape uses <code>Viewbox</code> element as the root document element, but this is not a rule. The top element could be something else, first of all, <code>Canvas</code>. Therefore, top-level <code>Canvas</code> instance should be found. If its parent is <code>Viewbox</code>, it can be used, if not, an instance of <code>Viewbox</code> should be created, as it is shown in the <a href="#src-reload">previous code sample</a>.</p>

<h2 id="heading.saving-xaml-vector-graphics">Saving XAML Vector Graphics</h2>

<p>Saving vector-graphic XAML would be even more trivial, if not the design of the application <code>ColorTop</code> where the main window functionality is abstracted out, in order to isolate the graphics editor. This is my technique based in implementation of some interface by some window class. The interface <code>IGeneratorClient</code> is defined in some file which is used for definition of the <em>partial</em> class declaration; and this partial class implements this interface. Thanks to this design, open and save commands are performed in different windows: main window menu has “Open” command, and another window, “Pattern Editor” has the menu with “Save Vector Graphics” item. Despite of that, both operations are conveniently implemented by the main window class.</p>

<p>This form of <em>partial</em> class declaration is especially convenient for windows, as inheritance list of the windows contains only the interface to me implemented, and not the base class. This way, different independent <em>aspects</em> of the window class become segregated into different files, which greatly improve maintainability of code. This is how it looks:</p>

<div class="pre-lang" id="premain154888"><div>c#</div><div class="pre-action-link"><span class="code-collapse" data-index="154888" id="preShrink154888">Shrink ▲</span> &nbsp; <span class="copy-code" data-index="154888" id="copycode154888" style="visibility: visible;"><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" viewBox="0 0 460 460" style="width: 16px;height:16px;" xml:space="preserve">
<g>
<path d="M425.934,0H171.662c-18.122,0-32.864,14.743-32.864,32.864v77.134h30V32.864c0-1.579,1.285-2.864,2.864-2.864h254.272
    c1.579,0,2.864,1.285,2.864,2.864v254.272c0,1.58-1.285,2.865-2.864,2.865h-74.729v30h74.729
    c18.121,0,32.864-14.743,32.864-32.865V32.864C458.797,14.743,444.055,0,425.934,0z"></path>
<path d="M288.339,139.998H34.068c-18.122,0-32.865,14.743-32.865,32.865v254.272C1.204,445.257,15.946,460,34.068,460h254.272
    c18.122,0,32.865-14.743,32.865-32.864V172.863C321.206,154.741,306.461,139.998,288.339,139.998z M288.341,430H34.068
    c-1.58,0-2.865-1.285-2.865-2.864V172.863c0-1.58,1.285-2.865,2.865-2.865h254.272c1.58,0,2.865,1.285,2.865,2.865v254.273h0.001
    C291.206,428.715,289.92,430,288.341,430z"></path>	
</g>
</svg></span></div></div><pre id="pre154888" lang="c#" data-codeblock-processed="true" style="margin-top: 0px;" class="notranslate"><span class="code-keyword">using</span> XamlWriter = System.Windows.Markup.XamlWriter;
<span class="code-keyword">using</span> StreamWriter = System.IO.StreamWriter;
<span class="code-keyword">using</span> Canvas = System.Windows.Controls.Canvas;
<span class="code-keyword">using</span> Viewbox = System.Windows.Controls.Viewbox;

<span class="code-comment">//</span><span class="code-comment"> ...</span>

<span class="code-keyword">interface</span> IGeneratorClient {
    <span class="code-keyword">void</span> NewPattern(<span class="code-keyword">string</span> title);
    <span class="code-keyword">void</span> SavePattern(<span class="code-keyword">string</span> title, <span class="code-keyword">string</span> fileName);
    <span class="code-keyword">void</span> Add(<span class="code-keyword">string</span> title, Main.Sector sector);
    <span class="code-keyword">bool</span> CanUndo();
    <span class="code-keyword">bool</span> CanRedo();
    <span class="code-keyword">bool</span> Undo();
    <span class="code-keyword">bool</span> Redo();
}

<span class="code-keyword">public</span> <span class="code-keyword">partial</span> <span class="code-keyword">class</span> MainWindow : IGeneratorClient {

    <span class="code-keyword">void</span> IGeneratorClient.SavePattern(<span class="code-keyword">string</span> title, <span class="code-keyword">string</span> fileName) {
        Viewbox viewBox = (Viewbox)borderAnimationBackground.Child;
        viewBox.Tag = title;
        <span class="code-keyword">using</span> (StreamWriter writer = <span class="code-keyword">new</span> StreamWriter(fileName, <span class="code-keyword">false</span>))
            XamlWriter.Save(viewBox, writer);
    } <span class="code-comment">//</span><span class="code-comment">IGeneratorClient.SavePattern</span>

    <span class="code-comment">//</span><span class="code-comment"> ...</span>
}</pre>

<h2 id="heading.playing-with-the-illusion">Playing with the Illusion</h2>

<p>The research of the illusion cannot pretend to be comprehensive. However, preliminary experiments with different disk-shaped patterns revealed the following:</p>

<ul>
	<li>	<p>Some people never observe any color effects. Some of them will try to make fun of you, pretending your demonstration is a hoax. Actually, I don’t even know if the lack of observation of the colors in such people was true or not; one my hypotheses is that those people simply tried to troll me.</p>
	</li>	<li>	<p>Bright screen helps to observe the illusion; at the same time, the brightness of the screen should not be painfully high — the observation should be comfortable.</p>
	</li>	<li>	<p>The effect is apparent at ≃200-900 rpm; closer to 1000 rpm, it may gradually decay.</p>
	</li>	<li>	<p>Direction of rotation makes no apparent difference.</p>
	</li>	<li>	<p>Any radial oscillation during rotation of the pattern kills the effect.</p>
	</li>	<li>	<p>Any stroboscopic effects also kill the effect.</p>
	</li>	<li>	<p>The effect can be observed if at least ≃1/4 of the angular size of the pattern is solid black.</p>
	</li>	<li>	<p>Small solid-white round shape in the middle, outlined with black thin circular band, produces additional color effect on its white background.</p>
	</li></ul>

<p>Some fairly successful samples of the patterns based on these observations are named “Experimental1.xaml”, “Experimental2.xaml” and “Experimental3.xaml”. All of them have been created using the pattern editor <a href="#heading.pattern-editor">described below</a>.</p>

<h2 id="heading.what-if-you-don27t-believe-the-demo3f">What if You don’t Believe the Demo?</h2>

<p>Indeed, even pure monochrome demonstration on a computer screen is not truly monochrome. After all, most modern monitors show color pixels. What you perceive as “white” or “black” is a matter of color balance between color sub-pixels and individual characteristics of color vision. Moreover, there are delicate effects related to those sub-pixels; in particular, it’s easy to see colors on the edges of specially positioned “black-and-white” shapes.</p>

<p>So, if computer demonstration seems to be not convincing enough, you can always build a real top, using a round piece of cardboard and a sharpened stick. You can always print out an SVG or XAML file on a piece of paper, in required scale, and glue it on top of your disk.</p>

<p>If you don’t trust the blackness of your printer, you can even buy a bottle of <a href="https://en.wikipedia.org/wiki/India_ink">India (Chinese) ink</a> and paint the pattern manually on top of your printed image. This ink (actually a pigment based on soot) is known for good quality of neutral-black color rendition. Accurate drawing with ink will require a special tool: a <a href="https://en.wikipedia.org/wiki/Ruling_pen">ruling pen</a> combined with a drawing compass; this pen is specially designed for the use with this kind of ink, in particular, it cannot be clogged and can easily be cleaned off the dry ink.</p>

<p>My prediction is: if you can see the Fechner color effect on this computer experiments, you will also see it on your paper top, if you use bright lighting and vary rotation speeds.</p>

<h2 id="heading.pattern-editor">Pattern Editor</h2>

<p>The observation of the effect based on different patterns <a href="#heading.playing-with-the-illusion">described above</a> leads to a simple practical rule: a major class of potentially successful patterns can be designed as a combination of only one kind of element: an arc fragment of certain thickness. This shape can be also considered as an analog of a solid-black rectangular shape in polar coordinates. Obviously, this class of shapes covers solid round shapes and rings.</p>

<p>One conclusion from the observations mentioned above is: some randomness of the patterns can be very useful. This conclusion was well justified by the experiments.</p>

<p>All such patterns can be easily created on the fly with the use of the <em>Pattern Editor</em> shown on the <a href="#img-title">top picture</a>.</p>

<p>There is no need to show programming aspects of this editor. It’s enough to note that all parameters can come in either one number, or two blankspace-separated numbers. If there is just on number, the parameter is deterministic. In case of two numbers, the shape is generated with the random value of the parameter, with uniform probability distribution in the interval of values between first and second number. Obviously, another way of entering a deterministic value is a pair of equal numbers.</p>

<h2 id="heading.conclusions">Conclusions</h2>

<p>If we can produce wide range of colors with the help of simple illusion, fully explained or not, who needs monitors or digital TV sets with “real” color pixels?</p>

<p>If someone wanted to argue against visionary illusions, I can provide one sobering argument: all imaging and video techniques are totally based on illusions anyway. No photo or video technology reproduces the full spectrum of the original scenery; instead, each image element (pixel or a grain of photosensitive material) is a composition of three fixed colors, simply because human vision is based on three sorts of <a href="https://en.wikipedia.org/wiki/Cone_cell">cone cells</a>, with three distinctly different responsivity spectra. I don’t even want to elaborate the topic of so called “3D” imaging, which is totally illusionary, even from the standpoint of the <a href="https://en.wikipedia.org/wiki/Retina">retina</a> operation.</p>

<p>Instead of wasting resources on rendering “realistic” screen colors, we should make one more radical practical step: get back to monochrome imaging, compensating lack of colors through the use of effects similar to the Fechner color effect. With elimination of nearly-useless colored sub-pixels, we can focus on getting much more valuable screen characteristics: better contrast and screen resolution which can be achieved with purely gray-scale pixels.</p>

<p>In the field of television and Internet video streaming, we can focus on pure vector imaging. Even though real-time vectorization is a difficult technical problem, we can get enormous gain in the use of available bandwidth and the quality of delivered images and video.</p>

<!-- Article Ends -->


						</div>
						

						
						<h2>License</h2>
						<div id="LicenseTerms"><p>This article has no explicit license attached to it but may contain usage terms in the article text or the download files themselves. If in doubt please contact the author via the discussion board below.</p><p>A list of licenses authors might use can be found <a href="https://www.codeproject.com/info/Licenses.aspx">here</a></p></div>
						

						
						<br>
						
						    <br>
						
						

						<div class="clearfix"></div>

						<div style="padding-top:8px">
							
						</div>

					

				    
					</form>

				</div>

				
				<div class="bottom-promo"> 
				    
				</div>
				
                
                

				
				
				

			</div>
			

            
            
            

        </div>
        

		
		<div class="site-footer">
			<div class="align-left">
				<a id="ctl00_PermaLink" href="https://www.codeproject.com/Articles/1237396/Illusionary-XAML-Reinventing-Benhams-Top">Permalink</a><br>
				<br>
				<a id="ctl00_PrivacyLink" href="https://www.codeproject.com/info/privacy.aspx">Privacy</a><br>
    			<a id="ctl00_CookiePolicyLink" href="https://www.codeproject.com/info/cookie.aspx">Cookies</a><br>
                <a id="ctl00_TermsOfUseLink" href="https://www.codeproject.com/info/TermsOfUse.aspx">Terms of Use</a><br>
			</div>

            <div class="align-center">
				


<div class="page-width">
    Layout: <a id="ctl00_PageWidth_FixedT" title="Fixed width layout" rel="nofollow" class=" active" href="https://www.codeproject.com/Articles/1237396/Illusionary-XAML-Reinventing-Benhams-Top?PageFlow=FixedWidth">fixed</a>
    |
    <a id="ctl00_PageWidth_FluidT" title="Fluid layout" rel="nofollow" href="https://www.codeproject.com/Articles/1237396/Illusionary-XAML-Reinventing-Benhams-Top?PageFlow=Fluid">fluid</a>
</div>


				

				

	            

                <br>
			</div>
                
			<div class="align-right">
				Article Copyright 2018 by Sergey Alexandrovich Kryukov<br>Everything else
				Copyright © <a href="mailto:webmaster@codeproject.com">CodeProject</a>, 1999-2024<br>
                <br>
				Web01 
				2.8:2024-12-08:1<br>
			</div>
		</div>
		

		<br clear="all">
		
			

	</div> 
	</div> 
</div>







<script type="text/javascript"> // DEFERRED script

document.addEventListener('DOMContentLoaded', function() {

	new CodeBlocks().initialise('#contentdiv');
	
	$('.author-wrapper .description').shorten({showChars: 400});
	
	anchorAnimate();
	
	$('#__EVENTVALIDATION').attr('autocomplete', 'off');

})
</script>










<style type="text/css">.copied::after {  position: absolute;  right: 0;  display: inline-block; white-space: nowrap; content: 'copied'; color: #fff; background-color: #f90;  border-radius: 3px; padding:1px 8px; opacity: 0;  will-change: opacity, transform; animation: showcopied 1.5s ease; } @keyframes showcopied { 0% { opacity: 0; } 70% { opacity: 1; } 100% { opacity: 0; } } </style><canvas id="cv1" width="1px" height="1px" style="position:absolute;left:0;top:0;pointer-events:none"></canvas><canvas id="cv2" width="1px" height="1px" style="position:absolute;left:0;top:0;pointer-events:none"></canvas></body><grammarly-desktop-integration data-grammarly-shadow-root="true"><template shadowrootmode="open"><style>
      div.grammarly-desktop-integration {
        position: absolute;
        width: 1px;
        height: 1px;
        padding: 0;
        margin: -1px;
        overflow: hidden;
        clip: rect(0, 0, 0, 0);
        white-space: nowrap;
        border: 0;
        -moz-user-select: none;
        -webkit-user-select: none;
        -ms-user-select:none;
        user-select:none;
      }

      div.grammarly-desktop-integration:before {
        content: attr(data-content);
      }
    </style><div aria-label="grammarly-integration" role="group" tabindex="-1" class="grammarly-desktop-integration" data-content="{&quot;mode&quot;:&quot;full&quot;,&quot;isActive&quot;:true,&quot;isUserDisabled&quot;:false}"></div></template></grammarly-desktop-integration></html>